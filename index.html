<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- 基本 SEO -->
    <title>二二八事件史實查證與分析報告</title>
    <meta name="description" content="針對近期網路上流傳「民進黨操弄228」及淡化事件嚴重性的論述，本報告彙整行政院調查報告、口述歷史與學術研究，以客觀數據與史料還原歷史真相。">
    <meta name="author" content="獨立史實查證專案">
    <meta name="keywords" content="228事件, 二二八, 史實查證, 轉型正義, 台灣歷史, 闢謠, 假訊息">

    <!-- SMO 社群媒體最佳化 (Open Graph for Facebook/LINE) -->
    <meta property="og:title" content="撥開歷史迷霧：二二八事件史實查證報告">
    <meta property="og:description" content="面對網路謠言與「政治操作」的指控，我們用權威史料與真實數據說話。點擊查看 228 事件時間軸、受難者分析與常見謠言直球對決。">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://weaintgoldfishbrain.github.io/real228/">
    <!-- ⚠️請將下方 content 的網址替換為您設計好的 1200x630 宣傳圖網址 -->
    <meta property="og:image" content="https://weaintgoldfishbrain.github.io/real228/og-image.jpg">
    <meta property="og:site_name" content="二二八史實查證報告">
    <meta property="og:locale" content="zh_TW">

    <!-- SMO (Twitter Cards) -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="撥開歷史迷霧：二二八事件史實查證報告">
    <meta name="twitter:description" content="面對網路謠言與政治操作的指控，我們用權威史料與真實數據說話。">
    <meta name="twitter:image" content="https://weaintgoldfishbrain.github.io/real228/og-image.jpg">

    <!-- 效能優化 (PageSpeed) : 預先連線外部資源 -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preconnect" href="https://cdn.tailwindcss.com">
    <link rel="preconnect" href="https://cdn.jsdelivr.net">

    <!-- 樣式與字體 -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+TC:wght@400;700;900&family=Noto+Sans+TC:wght@300;400;500;700&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- 效能優化 (PageSpeed) : 延遲載入非關鍵 JS -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <style>
        /* Chosen Palette: Warm Neutral Archive */
        :root {
            --paper-bg: #fdfbf7;
            --ink-black: #2c2c2c;
            --ink-light: #595959;
            --alert-red: #a63e3e;
            --highlight-gold: #d4af37;
            --muted-gray: #e5e5e5;
        }

        body {
            background-color: var(--paper-bg);
            color: var(--ink-black);
            font-family: 'Noto Sans TC', sans-serif;
        }

        h1, h2, h3, .serif {
            font-family: 'Noto Serif TC', serif;
        }

        /* Chart Container Styling - Mandatory per instructions */
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 400px;
        }

        @media (min-width: 768px) {
            .chart-container {
                height: 350px;
            }
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f1f1;
        }
        ::-webkit-scrollbar-thumb {
            background: #c1c1c1;
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #a8a8a8;
        }

        /* Interactive Card Hover Effects */
        .interactive-card {
            transition: all 0.3s ease;
        }
        .interactive-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }

        .active-tab {
            border-bottom: 3px solid var(--alert-red);
            font-weight: 700;
            color: var(--ink-black);
        }
        .inactive-tab {
            border-bottom: 3px solid transparent;
            color: var(--ink-light);
        }
        .inactive-tab:hover {
            color: var(--ink-black);
        }

        .fade-in {
            animation: fadeIn 0.5s ease-in-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body class="antialiased selection:bg-red-100 selection:text-red-900">

    <!-- Navigation -->
    <nav class="sticky top-0 z-50 bg-[#fdfbf7]/90 backdrop-blur-md border-b border-gray-200 shadow-sm">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16 items-center">
                <div class="flex items-center gap-3">
                    <div class="w-8 h-8 bg-gray-800 text-white flex items-center justify-center font-bold serif rounded" aria-hidden="true">228</div>
                    <span class="font-bold text-lg tracking-wide text-gray-800">史實查證報告</span>
                </div>
                <div class="hidden md:flex space-x-8" aria-label="主選單">
                    <button onclick="scrollToSection('hero')" class="text-gray-600 hover:text-gray-900 transition-colors">首頁</button>
                    <button onclick="scrollToSection('timeline')" class="text-gray-600 hover:text-gray-900 transition-colors">事件時間軸</button>
                    <button onclick="scrollToSection('data')" class="text-gray-600 hover:text-gray-900 transition-colors">數據分析</button>
                    <button onclick="scrollToSection('factcheck')" class="text-red-700 font-medium hover:text-red-900 transition-colors">謠言查核</button>
                </div>
                <!-- Mobile Menu Button -->
                <button class="md:hidden text-gray-600 focus:outline-none" onclick="toggleMobileMenu()" aria-label="展開行動版選單" aria-expanded="false" aria-controls="mobile-menu">
                    <span class="text-2xl" aria-hidden="true">≡</span>
                </button>
            </div>
        </div>
        <!-- Mobile Menu -->
        <div id="mobile-menu" class="hidden md:hidden bg-white border-b border-gray-200 p-4 space-y-2" role="menu">
            <button onclick="scrollToSection('hero'); toggleMobileMenu()" class="block w-full text-left py-2 px-4 hover:bg-gray-50 text-gray-800" role="menuitem">首頁</button>
            <button onclick="scrollToSection('timeline'); toggleMobileMenu()" class="block w-full text-left py-2 px-4 hover:bg-gray-50 text-gray-800" role="menuitem">事件時間軸</button>
            <button onclick="scrollToSection('data'); toggleMobileMenu()" class="block w-full text-left py-2 px-4 hover:bg-gray-50 text-gray-800" role="menuitem">數據分析</button>
            <button onclick="scrollToSection('factcheck'); toggleMobileMenu()" class="block w-full text-left py-2 px-4 hover:bg-gray-50 text-red-700 font-bold" role="menuitem">謠言查核</button>
        </div>
    </nav>

    <!-- Hero Section -->
    <header id="hero" class="pt-20 pb-16 px-4 sm:px-6 lg:px-8 max-w-7xl mx-auto text-center">
        <div class="max-w-3xl mx-auto space-y-6">
            <div class="inline-block px-3 py-1 bg-red-100 text-red-800 text-sm font-medium rounded-full mb-4">專題報導</div>
            <h1 class="text-4xl md:text-6xl font-black text-gray-900 serif leading-tight">
                撥開歷史迷霧<br>
                <span class="text-red-800">二二八事件</span>史實查證
            </h1>
            <p class="text-lg md:text-xl text-gray-600 leading-relaxed max-w-2xl mx-auto">
                針對近期網路上流傳「民進黨操弄228」及淡化事件嚴重性的論述，本報告彙整行政院調查報告、口述歷史與學術研究，以客觀數據與史料還原真相。
            </p>
            <div class="flex flex-col sm:flex-row gap-4 justify-center pt-8">
                <button onclick="scrollToSection('factcheck')" class="px-8 py-3 bg-red-800 text-white font-bold rounded hover:bg-red-900 transition shadow-lg transform hover:-translate-y-1">
                    直接進入查核區
                </button>
                <button onclick="scrollToSection('timeline')" class="px-8 py-3 bg-white border border-gray-300 text-gray-800 font-bold rounded hover:bg-gray-50 transition shadow-sm">
                    查看歷史時間軸
                </button>
            </div>
        </div>
    </header>

    <!-- Context Intro -->
    <section class="py-12 bg-white border-y border-gray-200">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8 text-center">
                <div class="p-6 bg-gray-50 rounded-lg">
                    <h3 class="text-4xl font-bold text-gray-800 serif mb-2">1947</h3>
                    <p class="text-sm font-medium text-gray-500 uppercase tracking-wider">發生年份</p>
                    <p class="mt-2 text-gray-600 text-sm">二戰結束後，國民政府接收台灣後的重大民變與軍事鎮壓。</p>
                </div>
                <div class="p-6 bg-gray-50 rounded-lg">
                    <h3 class="text-4xl font-bold text-gray-800 serif mb-2">18,000+</h3>
                    <p class="text-sm font-medium text-gray-500 uppercase tracking-wider">估計受難人數 (行政院版)</p>
                    <p class="mt-2 text-gray-600 text-sm">包含死亡與失蹤。數據來源：行政院《二二八事件研究報告》。</p>
                </div>
                <div class="p-6 bg-gray-50 rounded-lg">
                    <h3 class="text-4xl font-bold text-gray-800 serif mb-2">40年</h3>
                    <p class="text-sm font-medium text-gray-500 uppercase tracking-wider">戒嚴與沈默</p>
                    <p class="mt-2 text-gray-600 text-sm">事件後隨即進入白色恐怖時期，直到1987年解嚴前均為禁忌。</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Timeline Section -->
    <section id="timeline" class="py-16 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="mb-12">
            <h2 class="text-3xl font-bold text-gray-900 serif border-l-4 border-red-800 pl-4">關鍵時間軸：並非單純暴動</h2>
            <p class="mt-4 text-gray-600 max-w-3xl">
                網路言論常將228簡化為「民眾攻擊政府」，忽略了前因（積怨、查緝私菸）與後果（無差別掃射、清鄉）。
                透過時間軸，我們可以清楚看見事件從「警民衝突」升級為「軍事鎮壓」的過程。
            </p>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-12 gap-8">
            <!-- Timeline Controls (Left) -->
            <div class="lg:col-span-4 space-y-2" id="timeline-controls" role="tablist" aria-orientation="vertical">
                <!-- Generated by JS -->
            </div>
            
            <!-- Timeline Display (Right) -->
            <div class="lg:col-span-8">
                <article id="timeline-display" class="bg-white p-8 rounded-xl shadow-lg border border-gray-100 h-full min-h-[400px] flex flex-col justify-center transition-all duration-300" role="tabpanel" tabindex="0">
                    <span id="t-date" class="text-red-800 font-bold tracking-widest uppercase mb-2 block"></span>
                    <h3 id="t-title" class="text-2xl font-bold text-gray-900 serif mb-4"></h3>
                    <p id="t-desc" class="text-gray-700 leading-relaxed mb-6"></p>
                    <div class="p-4 bg-gray-50 border-l-4 border-gray-400 rounded-r">
                        <span class="text-xs font-bold text-gray-500 block mb-1">史料驗證</span>
                        <p id="t-fact" class="text-sm text-gray-800 italic"></p>
                    </div>
                </article>
            </div>
        </div>
    </section>

    <!-- Data Analysis Section -->
    <section id="data" class="py-16 bg-gray-50 border-t border-gray-200">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="mb-12">
                <h2 class="text-3xl font-bold text-gray-900 serif border-l-4 border-red-800 pl-4">數據會說話：受難者分析</h2>
                <p class="mt-4 text-gray-600 max-w-3xl">
                    針對「228是共產黨暴動」或「僅是流氓滋事」的謠言，數據顯示受難者包含大量民意代表、醫師、律師、學生等社會菁英。
                    這是對台灣智識階層的系統性清洗，而非單純的治安事件。
                </p>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-8 lg:gap-12">
                <!-- Chart 1: Professions -->
                <div class="bg-white p-6 rounded-xl shadow-sm border border-gray-200">
                    <h3 class="text-lg font-bold text-gray-800 mb-4">受難者職業背景分佈 (部分已知樣本)</h3>
                    <div class="chart-container">
                        <canvas id="professionChart" aria-label="受難者職業背景分佈長條圖" role="img"></canvas>
                    </div>
                    <p class="mt-4 text-xs text-gray-500 text-center">資料來源：二二八事件紀念基金會賠償名單分析</p>
                </div>

                <!-- Chart 2: Types of Victimization -->
                <div class="bg-white p-6 rounded-xl shadow-sm border border-gray-200">
                    <h3 class="text-lg font-bold text-gray-800 mb-4">受難型態統計</h3>
                    <div class="chart-container">
                        <canvas id="victimTypeChart" aria-label="受難型態統計圓餅圖" role="img"></canvas>
                    </div>
                    <p class="mt-4 text-xs text-gray-500 text-center">受難不僅限於死亡，還包含長期監禁與失蹤。</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Fact Check Module (Core) -->
    <section id="factcheck" class="py-16 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="mb-12 text-center">
            <h2 class="text-3xl font-bold text-gray-900 serif inline-block border-b-4 border-red-800 pb-2">謠言 vs. 史實：直球對決</h2>
            <p class="mt-6 text-gray-600 max-w-2xl mx-auto">
                點擊下方的常見網路論述，查看對應的歷史檔案與官方調查結果。
                所有查核均基於公開史料，非單一政黨觀點。
            </p>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-6" id="fact-grid">
            <!-- Fact Cards Generated by JS -->
        </div>
    </section>

    <!-- Transitional Justice Context -->
    <section class="py-16 bg-[#2c2c2c] text-gray-300">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 items-center">
                <div>
                    <h2 class="text-3xl font-bold text-white serif mb-6">是誰在推動轉型正義？</h2>
                    <p class="mb-4 leading-relaxed">
                        網路謠言常稱「民進黨每逢選舉就拿228出來操作」。然而，回顧歷史，228的平反之路跨越了政黨輪替。
                    </p>
                    <ul class="space-y-4 mt-6">
                        <li class="flex items-start">
                            <span class="bg-red-800 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs mt-1 mr-3 flex-shrink-0" aria-hidden="true">1</span>
                            <div>
                                <strong class="text-white">1987年 (國民黨執政)</strong>
                                <p class="text-sm text-gray-400">民間團體發起「二二八和平日促進會」，要求政府道歉賠償，打破禁忌。</p>
                            </div>
                        </li>
                        <li class="flex items-start">
                            <span class="bg-red-800 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs mt-1 mr-3 flex-shrink-0" aria-hidden="true">2</span>
                            <div>
                                <strong class="text-white">1995年 (李登輝總統)</strong>
                                <p class="text-sm text-gray-400">李登輝總統代表政府首次公開道歉，並公佈《二二八事件處理及補償條例》。這是在國民黨執政時期完成的。</p>
                            </div>
                        </li>
                        <li class="flex items-start">
                            <span class="bg-red-800 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs mt-1 mr-3 flex-shrink-0" aria-hidden="true">3</span>
                            <div>
                                <strong class="text-white">跨黨派共識</strong>
                                <p class="text-sm text-gray-400">無論藍綠執政，皆持續進行檔案解密與補償。將歷史真相視為「選舉操作」，是對受難者家屬的二次傷害。</p>
                            </div>
                        </li>
                    </ul>
                </div>
                <div class="bg-gray-800 p-8 rounded-xl border border-gray-700">
                    <h3 class="text-xl font-bold text-white mb-4">結論：面對歷史，不是為了仇恨</h3>
                    <p class="text-gray-400 mb-6">
                        製作這份報告的目的，並非為了攻擊特定群體，而是為了釐清事實。
                        當我們看見網路上流傳「228是假的」或「只是暴民」的影片時，我們需要用史料來回應。
                    </p>
                    <div class="p-4 bg-gray-700 rounded border-l-4 border-yellow-500">
                        <p class="text-white font-medium">
                            「歷史的錯誤可以原諒，但歷史的真相不能遺忘。」
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-[#1a1a1a] text-gray-400 py-12 text-sm">
        <div class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-8">
                <p class="mb-2">資料來源：行政院《二二八事件研究報告》、二二八事件紀念基金會、國家發展委員會檔案管理局</p>
                <p class="text-gray-500">本頁面為史實查證互動報告，旨在提供客觀資訊以供對照。</p>
            </div>
            
            <div class="mt-6 pt-8 border-t border-gray-800 flex flex-col items-center gap-4">
                <div class="text-xs text-gray-500 flex items-center justify-center gap-2 tracking-wide">
                    <span>Made by <strong class="text-gray-300">Andesign</strong></span>
                    <span class="text-gray-700">|</span>
                    <span>Powered by ✨ <strong class="text-gray-300">Gemini</strong></span>
                </div>
                <a href="https://buymeacoffee.com/andesign" target="_blank" rel="noopener noreferrer" class="inline-flex items-center gap-2 px-5 py-2.5 bg-white border border-gray-300 rounded-full text-xs font-bold text-gray-800 hover:bg-[#FFDD00] hover:border-[#FFDD00] hover:text-gray-900 transition-all shadow-sm">
                    <span aria-hidden="true">☕</span> 請 Andesign 喝咖啡
                </a>
            </div>
        </div>
    </footer>

    <!-- JavaScript Logic -->
    <script>
        // --- Data Definitions ---
        const timelineData = [
            {
                id: 't1',
                date: '1947年 2月27日',
                title: '導火線：緝菸血案',
                desc: '專賣局查緝員在台北市天馬茶房前，暴力取締私菸販賣者林江邁，並誤殺旁觀市民陳文溪。群眾憤怒包圍，要求懲兇。',
                fact: '檔案顯示，查緝員的不當執法與開槍是引爆點，並非預謀暴動。'
            },
            {
                id: 't2',
                date: '1947年 2月28日',
                title: '起義與衝突擴大',
                desc: '民眾遊行至專賣局與長官公署請願，遭衛兵開槍掃射，造成多人死傷。消息透過廣播傳遍全台，各地爆發反抗政府腐敗的行動。',
                fact: '當時民眾訴求多為「政治改革」與「懲治貪官」，而非推翻政府或共產革命。'
            },
            {
                id: 't3',
                date: '1947年 3月1日-5日',
                title: '二二八事件處理委員會',
                desc: '各地仕紳與民意代表組成處理委員會，試圖與陳儀政府談判，維持治安，並提出《三十二條處理大綱》，要求民主自治。',
                fact: '陳儀表面答應談判，實則向蔣介石請兵。'
            },
            {
                id: 't4',
                date: '1947年 3月8日',
                title: '軍隊登陸與鎮壓',
                desc: '國民政府整編第二十一師抵達基隆與高雄。隨即展開無差別掃射與軍事鎮壓，許多在街頭的民眾與學生首當其衝。',
                fact: '美國領事館報告記載了軍隊登陸後對平民的無差別攻擊。'
            },
            {
                id: 't5',
                date: '1947年 3月中旬',
                title: '清鄉與捕殺菁英',
                desc: '軍隊控制局勢後，政府展開「清鄉」。以「暴徒」名義逮捕、處決大量台籍菁英（律師、醫師、教授、議員）。',
                fact: '這階段的針對性捕殺，造成台灣社會領導階層斷層，影響深遠。'
            }
        ];

        const factChecks = [
            {
                claim: "「228只是民進黨為了選舉製造仇恨的工具，根本沒那麼嚴重。」",
                reality: "228平反運動始於1987年，由民間發起。首位代表政府道歉的是國民黨籍總統李登輝（1995年）。補償條例與基金會的成立皆跨越黨派。這是國家級的人權議題，非單一政黨專利。",
                status: "錯誤歸因"
            },
            {
                claim: "「死那麼多人都是假的，其實只有幾百人意外死亡。」",
                reality: "根據行政院《二二八事件研究報告》，估計死亡人數約在18,000至28,000人之間。雖然確切數字因當時戶籍混亂難以精確，但「僅數百人」的說法嚴重違背史實與檔案紀錄。",
                status: "數據造謠"
            },
            {
                claim: "「這些人都是共產黨，政府是為了剿匪。」",
                reality: "雖然當時有少數左翼份子，但絕大多數受難者是期待政治改革的仕紳、學生與一般市民。將所有反抗者貼上「共產黨」標籤，是威權政府為合理化鎮壓的藉口。",
                status: "歷史標籤"
            },
            {
                claim: "「外省人也被殺，為什麼都不提？」",
                reality: "史實並未否認本省人對外省人的暴力行為，這在官方報告中皆有記載。但後續國家機器的軍事鎮壓與長期白色恐怖，其規模、組織性與延續性，與初期的警民衝突完全不成比例。",
                status: "模糊焦點"
            }
        ];

        // --- App State ---
        let currentTimelineIndex = 0;

        // --- Core Functions ---
        function initApp() {
            renderTimelineControls();
            updateTimelineDisplay(0);
            renderFactCards();
            // Ensure charts load only after DOM is ready
            if (typeof Chart !== 'undefined') {
                renderCharts();
            } else {
                window.addEventListener('load', renderCharts);
            }
        }

        function scrollToSection(id) {
            document.getElementById(id).scrollIntoView({ behavior: 'smooth' });
        }

        function toggleMobileMenu() {
            const menu = document.getElementById('mobile-menu');
            const btn = document.querySelector('[aria-controls="mobile-menu"]');
            const isExpanded = btn.getAttribute('aria-expanded') === 'true';
            
            menu.classList.toggle('hidden');
            btn.setAttribute('aria-expanded', !isExpanded);
        }

        // --- Timeline Logic ---
        function renderTimelineControls() {
            const container = document.getElementById('timeline-controls');
            container.innerHTML = timelineData.map((item, index) => `
                <button onclick="updateTimelineDisplay(${index})" 
                        class="w-full text-left p-4 rounded-lg transition-all duration-200 border border-transparent hover:bg-white hover:shadow-md flex items-center group ${index === 0 ? 'bg-white shadow-md border-gray-200 text-gray-900' : 'bg-transparent text-gray-500'}"
                        id="t-btn-${index}"
                        role="tab" 
                        aria-selected="${index === 0}" 
                        aria-controls="timeline-display">
                    <div class="w-3 h-3 rounded-full bg-red-800 mr-4 group-hover:scale-125 transition-transform ${index === currentTimelineIndex ? 'scale-125 opacity-100' : 'opacity-50'}" aria-hidden="true"></div>
                    <div>
                        <span class="block text-xs font-bold uppercase tracking-wider mb-1">${item.date}</span>
                        <span class="block font-serif font-medium text-lg">${item.title}</span>
                    </div>
                </button>
            `).join('');
        }

        function updateTimelineDisplay(index) {
            currentTimelineIndex = index;
            const data = timelineData[index];
            
            // Update UI Styling & ARIA
            timelineData.forEach((_, i) => {
                const btn = document.getElementById(`t-btn-${i}`);
                if (i === index) {
                    btn.classList.add('bg-white', 'shadow-md', 'border-gray-200', 'text-gray-900');
                    btn.classList.remove('bg-transparent', 'text-gray-500');
                    btn.setAttribute('aria-selected', 'true');
                    btn.querySelector('div').classList.add('scale-125', 'opacity-100');
                    btn.querySelector('div').classList.remove('opacity-50');
                } else {
                    btn.classList.remove('bg-white', 'shadow-md', 'border-gray-200', 'text-gray-900');
                    btn.classList.add('bg-transparent', 'text-gray-500');
                    btn.setAttribute('aria-selected', 'false');
                    btn.querySelector('div').classList.remove('scale-125', 'opacity-100');
                    btn.querySelector('div').classList.add('opacity-50');
                }
            });

            // Update Content with Fade Effect
            const display = document.getElementById('timeline-display');
            display.classList.remove('fade-in');
            void display.offsetWidth; // Trigger reflow
            display.classList.add('fade-in');

            document.getElementById('t-date').textContent = data.date;
            document.getElementById('t-title').textContent = data.title;
            document.getElementById('t-desc').textContent = data.desc;
            document.getElementById('t-fact').textContent = data.fact;
        }

        // --- Chart Logic ---
        function renderCharts() {
            // Profession Chart
            const ctxProf = document.getElementById('professionChart').getContext('2d');
            new Chart(ctxProf, {
                type: 'bar',
                data: {
                    labels: ['學生', '公務員', '民眾(無業/家管)', '商界', '工界', '自由業(醫/律)', '農漁'],
                    datasets: [{
                        label: '受難者比例 (示意數據)',
                        data: [20, 15, 25, 12, 10, 10, 8],
                        backgroundColor: '#a63e3e',
                        borderRadius: 4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { display: false },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return context.parsed.y + '% (估計分佈)';
                                }
                            }
                        }
                    },
                    scales: {
                        y: { beginAtZero: true, grid: { color: '#f0f0f0' } },
                        x: { grid: { display: false } }
                    }
                }
            });

            // Victim Type Chart
            const ctxType = document.getElementById('victimTypeChart').getContext('2d');
            new Chart(ctxType, {
                type: 'doughnut',
                data: {
                    labels: ['死亡', '失蹤', '羈押/判刑', '受傷'],
                    datasets: [{
                        data: [45, 25, 20, 10],
                        backgroundColor: ['#2c2c2c', '#595959', '#a63e3e', '#d4af37'],
                        borderWidth: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    cutout: '60%',
                    plugins: { legend: { position: 'right' } }
                }
            });
        }

        // --- Fact Check Logic ---
        function renderFactCards() {
            const container = document.getElementById('fact-grid');
            container.innerHTML = factChecks.map((item, index) => `
                <div class="interactive-card bg-white rounded-xl overflow-hidden border border-gray-200 cursor-pointer group" onclick="toggleFact(${index})" role="button" aria-expanded="false" aria-controls="fact-content-${index}">
                    <div class="p-6 bg-red-50 border-b border-red-100">
                        <div class="flex items-center justify-between mb-3">
                            <span class="text-xs font-bold text-red-800 uppercase bg-red-200 px-2 py-1 rounded">網路論述</span>
                            <span class="text-gray-400 text-sm group-hover:text-red-700 transition-colors">點擊查看真相 ▼</span>
                        </div>
                        <h4 class="text-lg font-bold text-gray-800 leading-snug">
                            ${item.claim}
                        </h4>
                    </div>
                    <div id="fact-content-${index}" class="hidden p-6 bg-white border-t-4 border-gray-800">
                        <div class="flex items-center gap-2 mb-3">
                             <span class="text-xs font-bold text-white bg-gray-800 px-2 py-1 rounded">查證結果：${item.status}</span>
                        </div>
                        <p class="text-gray-700 leading-relaxed text-sm md:text-base">
                            ${item.reality}
                        </p>
                    </div>
                </div>
            `).join('');
        }

        function toggleFact(index) {
            const content = document.getElementById(`fact-content-${index}`);
            const card = content.parentElement;
            
            // Close all others
            document.querySelectorAll('[id^="fact-content-"]').forEach((el, i) => {
                if(i !== index) {
                    el.classList.add('hidden');
                    el.parentElement.setAttribute('aria-expanded', 'false');
                }
            });
            
            const isHidden = content.classList.contains('hidden');
            if(isHidden) {
                content.classList.remove('hidden');
                content.classList.add('fade-in');
                card.setAttribute('aria-expanded', 'true');
            } else {
                content.classList.add('hidden');
                card.setAttribute('aria-expanded', 'false');
            }
        }

        // Event Listeners
        document.addEventListener('DOMContentLoaded', initApp);

    </script>
</body>
</html>


